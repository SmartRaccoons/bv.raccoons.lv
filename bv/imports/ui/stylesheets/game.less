.game {
  display: grid;
  grid-gap: 0.5em;
  padding: 0.5em;
  grid-template-columns: 2fr 2fr 1fr 2fr 2fr;
  transition: transform 0.3s;
  min-height: 93%;
  &[data-full] {
    height: 100%;
  }
  &[data-serve='0'] .game-team[data-team='0'] .game-team-head::after,
  &[data-serve='1'] .game-team[data-team='0'] .game-team-head::after,
  &[data-serve='2'] .game-team[data-team='1'] .game-team-head::after,
  &[data-serve='3'] .game-team[data-team='1'] .game-team-head::after {
    display: block;
    background: #ffc107;
  }
  &[data-serve='0'] .game-team[data-team='0'] .game-team-player[data-player='0'],
  &[data-serve='1'] .game-team[data-team='0'] .game-team-player[data-player='1'],
  &[data-serve='2'] .game-team[data-team='1'] .game-team-player[data-player='0'],
  &[data-serve='3'] .game-team[data-team='1'] .game-team-player[data-player='1'] {
    .game-team-player-name button {
      border-color: #ffc107;
      background: #ffc107;
    }
  }
  &[data-ended] {
    .game-team-action {
      opacity: 0.3;
    }
  }
  &[data-counter] {
    grid-template-rows: 3fr 1fr;
    .game-team {
      grid-template-rows: 4fr 1fr;
      &-player-name {
        height: 100%;
      }
      &-head-score {
        font-size: 14em;
      }
    }
  }
  &-settings {
    height: 7%;
    text-align: center;
    select {
      max-width: 5em;
    }
  }
  &-stats {
    display: grid;
    grid-gap: 0.5em;
    padding: 0.5em;
    grid-template-columns: 2fr 1fr 2fr;
    >.game-score {
      grid-row: auto;
      .game-score-sets {
        font-size: 5em;
      }
    }
    &-team {
      text-align: center;
      &-name {
        width: 100%;
        font-size: 3em;
      }
      &-player {
        display: inline-block;
        width: 40%;
      }
    }
    &-sets {
      grid-column: ~"1/4";
      display: flex;
      flex-wrap: nowrap;
      align-content: space-around;
    }
    &-set {
      flex-grow: 1;
      flex-basis: 0;
      margin: 1em;
      &:first-child {
        margin-left: 0;
      }
      &:last-child {
        margin-right: 0;
      }
      .game-score-sets {
        font-size: 2em;
      }
    }
    &-recap {
      grid-column: ~"1/4";
      border-top: 1px solid #212529;
      padding: 1em 0;
      &-entry {
        text-align: center;
        &-team {
          display: inline-block;
          span {
            display: inline-block;
            width: 2em;
          }
        }
        &-action {
          display: inline-block;
          width: 10em;
          &[data-points='1'] {
            color: #28a745;
          }
          &[data-points='-1'] {
            color: #dc3545;
          }
          &::after {
            content: attr(data-action);
          }
        }
      }
    }
    &-data {
      grid-column: ~"1/4";
    }
  }
  &-history {
    grid-column: ~"1/6";
    grid-row: ~"2/3";
  }
  &-history-entry {
    min-height: 100%/4;
    display: grid;
    grid-gap: 0.5em;
    grid-template-columns: 4fr 1fr 4fr;
    span {
      display: none;
      grid-row: ~"1/2";
      height: 95%;
      border: 1px solid #fff;
    }
    [data-el='0'] {
      grid-gap: 0.5em;
      grid-template-columns: 1fr 1fr;
      &::after {
        content: "\00a0" attr(data-action) "\00a0" ;
        text-align: center;
        text-transform: uppercase;
        font-size: 0.8em;
        align-self: center;
      }
      &[data-player='0']::after {
        grid-column: ~"1/2";
      }
      &[data-player='1']::after {
        grid-column: ~"2/3";
      }
    }
    &[data-point='0'] {
      &[data-action='SW'] {
        [data-el='0'] {
          grid-column: ~"1/4";
          display: grid;
          border-color: #ffc107;
          &::after {
            grid-column: ~"1/3";
          }
        }
      }
      &[data-action='T'] {
        [data-el='0'] {
          display: grid;
          border-color: #ffc107;
          &::after {
            grid-column: ~"1/3";
          }
        }
        &[data-team='0'] [data-el='0'] {
          grid-column: ~"1/3";
        }
        &[data-team='1'] [data-el='0'] {
          grid-column: ~"2/4";
        }
      }
    }
    &[data-team='0'][data-point='1'] [data-el='0'],
    &[data-team='1'][data-point='-1'] [data-el='1'],
    {
      display: grid;
      grid-column: ~"1/2";
      background: #007bff;
    }
    &[data-team='0'][data-point='-1'] [data-el='0'] {
      display: grid;
      grid-column: ~"1/2";
      border-color: #dc3545;
    }

    &[data-team='0'][data-point='-1'] [data-el='1'],
    &[data-team='1'][data-point='1'] [data-el='0'],
    {
      display: grid;
      grid-column: ~"3/4";
      background: #007bff;
    }
    &[data-team='1'][data-point='-1'] [data-el='0']
    {
      display: grid;
      grid-column: ~"3/4";
      border-color: #dc3545;
    }
  }
  &-team {
    grid-row: ~"1/2";
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 30% 70%;
    grid-gap: 0.5em;
    position: relative;
    &[data-team='0'] {
      grid-column: ~"1/3";
      .game-team-head {
        &-timeout,
        &-timeout-counter {
          left: 0;
        }
        &-info, &-name {
          right: 0;
        }
      }
    }
    &[data-team='1'] {
      grid-column: ~"-3/-1";
      .game-team-head {
        &-timeout,
        &-timeout-counter,
        &-name {
          right: 0;
        }
        &-info, &-name {
          left: 0;
        }
      }
    }
    &-head {
      grid-column: ~"1/3";
      position: relative;
      background: #efefef;
      overflow: hidden;
      &::after {
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
        height: 2%;
        content: '';
        display: none;
      }
      &-score {
        font-size: 7em;
        position: absolute;
        top: 50%;
        left: 0;
        transform: translateY(-50%);
        width: 100%;
        text-align: center;
      }
      &-timeout {
        position: absolute;
        top: 0;
        height: 3em;
        &[data-timeouts]::after {
          &:extend(button[data-counter]::after);
          content: attr(data-timeouts);
        }
        &[data-timeouts='0'] {
          &:extend(button[data-highlight]);
          &::after {
            display: none;
          }
        }
      }
      &-timeout-counter {
        position: absolute;
        bottom: 0;
        &::after {
          content: attr(data-sec);
          font-size: 2em;
        }
        &::before {
          content: 'T';
        }
      }
      &-info {
        position: absolute;
        top: 2%;
        font-size: 1.7em;
      }
      &-name {
        position: absolute;
        bottom: 2%;
        font-size: 1.5em;
        white-space: nowrap;
        overflow: hidden;
      }
    }
    &-player-name {
      height: 10%;
      position: relative;
      button {
        position: absolute;
        font-size: 0.9em;
        width: 100%;
        height: 90%;
        white-space: nowrap;
        overflow: hidden;
      }
    }
    &-action {
      margin: 0;
      padding: 0;
      list-style: none;
      height: 90%;
      li {
        width: 100%;
        height: 100%/7;
        margin: 0;
        padding: 0;
      }
      button {
        width: 100%;
        height: 90%;
        display: block;
        position: relative;
        background: #fff;
        border-color: #28a745;
        color: #28a745;
        &::after {
          display: none;
          content: '';
          position: absolute;
          right: 0;
          top: 0;
          width: 10%;
          height: 100%;
          background: #28a745;
        }
        &[data-points='-1'] {
          border-color: #dc3545;
          color: #dc3545;
          &::after {
            background: #dc3545;
          }
        }
        &[data-last]::after {
          display: block;
        }
      }
    }
  }
  &-score {
    grid-row: ~"1/2";
    >button {
      height: 4em;
      width: 100%;
    }
    &-sets, &-history {
      text-align: center;
      font-size: 3em;
      width: 100%;
      white-space: nowrap;
      span {
        display: inline-block;
      }
    }
    &-history {
      padding: 0.4em 0 0;
      font-size: 0.8em;
    }
    &-data {
      text-align: center;
      margin: 0.5em 0;
      button {
        font-size: 0.8em;
      }
      p {
        font-size: 0.8em;
      }
    }
  }
  &[data-switch] {
    transform: scale(-1, 1);
    .game-team {
      transform: scale(-1, 1);
      &[data-team='0'] .game-team-head {
        &-timeout,
        &-timeout-counter {
          right: 0;
          left: auto;
        }
        &-info, &-name {
          left: 0;
        }
      }
      &[data-team='1'] .game-team-head {
        &-timeout,
        &-timeout-counter {
          left: 0;
        }
        &-info, &-name {
          right: 0;
          left: auto;
        }
      }
    }
    .game-history-entry span {
      transform: scale(-1, 1);
    }
    .game-score {
      button, span, p {
        transform: scale(-1, 1);
      }
    }
  }
}

.game-list {
  a {
    margin: 0 0.5em;
  }
}
